{% comment %}
  Blog List Section
  Displays a list of blog articles with customizable settings
{% endcomment %}

{% assign blog = blogs[section.settings.blog] %}
{% assign posts_limit = section.settings.posts_limit | default: 3 %}

<div class="container m-auto py-6" {{ section.shopify_attributes }}>
  {% if section.settings.heading != blank %}
    <h3 class="text-3xl font-semibold text-center mb-8 md:mb-12" style="color: {{ section.settings.heading_color }};">
      {{ section.settings.heading }}
    </h3>
  {% endif %}

  {% if section.settings.subheading != blank %}
    <p class="text-lg text-center mb-6" style="color: {{ section.settings.subheading_color }};">
      {{ section.settings.subheading }}
    </p>
  {% endif %}

  {% if blog and blog.articles.size > 0 %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
      {% for article in blog.articles limit: posts_limit %}
        {% render 'blog-card-item', article: article %}
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center text-gray-500 py-8">No blog posts found.</p>
  {% endif %}

  {% if section.settings.button_text != blank and section.settings.button_url != blank %}
    <div class="text-center my-12 md:my-16">
      <a
        href="{{ section.settings.button_url }}"
        class="btn {{ section.settings.button_style }}"
      >
        {{ section.settings.button_text }}
      </a>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Blog list",
  "settings": [
    {
      "type": "header",
      "content": "Blog Settings"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog",
      "info": "Select the blog to display articles from"
    },
    {
      "type": "range",
      "id": "posts_limit",
      "label": "Number of posts",
      "min": 1,
      "max": 12,
      "step": 1,
      "default": 3
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Latest Blog Posts"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "View All Posts"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button link"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "options": [
        {
          "value": "primary-button",
          "label": "Primary Black"
        },
        {
          "value": "secondary-button",
          "label": "Yellow"
        },
        {
          "value": "outline-button",
          "label": "Outline"
        }
      ],
      "default": "primary-button"
    }
  ],
  "presets": [
    {
      "name": "Blog list"
    }
  ]
}
{% endschema %}

{% comment %}
  Blog List Section
  Displays a list of blog articles with customizable settings
{% endcomment %}

{% assign blog = blogs[section.settings.blog] %}
{% assign posts_limit = section.settings.posts_limit | default: 3 %}

<div class="w-full" {{ section.shopify_attributes }}>
  <div
    class="mx-auto px-5 w-full"
    style="max-width: {{ section.settings.max_width }}px; padding-top: {{ section.settings.section_padding }}px; padding-bottom: {{ section.settings.section_padding }}px; max-width: 1600px;"
  >
    {% if section.settings.heading != blank %}
      <h2 class="!text-3xl text-center mb-6" style="color: {{ section.settings.heading_color }};">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    {% if section.settings.subheading != blank %}
      <p class="text-lg text-center mb-6" style="color: {{ section.settings.subheading_color }};">
        {{ section.settings.subheading }}
      </p>
    {% endif %}

    {% if blog and blog.articles.size > 0 %}
        {% render 'blog-card',
            blog: blog,
            posts_limit: posts_limit
        %}
    {% else %}
      <p class="text-center text-gray-500 py-8">No blog posts found.</p>
    {% endif %}

    {% if section.settings.button_text != blank and section.settings.button_url != blank %}
      <div class="text-center my-12">
        <a
          href="{{ section.settings.button_url }}"
          class="btn {{ section.settings.button_style }}"
        >
          {{ section.settings.button_text }}
        </a>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Blog list",
  "settings": [
    {
      "type": "header",
      "content": "Blog Settings"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog",
      "info": "Select the blog to display articles from"
    },
    {
      "type": "range",
      "id": "posts_limit",
      "label": "Number of posts",
      "min": 1,
      "max": 12,
      "step": 1,
      "default": 3
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "max_width",
      "label": "Maximum width",
      "min": 600,
      "max": 1600,
      "step": 100,
      "unit": "px",
      "default": 1200
    },
    {
      "type": "range",
      "id": "section_padding",
      "label": "Section padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 40
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Latest Blog Posts"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "View All Posts"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button link"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "options": [
        {
          "value": "primary-button",
          "label": "Primary Black"
        },
        {
          "value": "secondary-button",
          "label": "Yellow"
        },
        {
          "value": "outline-button",
          "label": "Outline"
        },
      ],
      "default": "primary-button"
    }
  ],
  "presets": [
    {
      "name": "Blog list"
    }
  ]
}
{% endschema %}
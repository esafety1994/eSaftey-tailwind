{% capture mobile_cols_class %}sm:grid-cols-{{ block.settings.columns_mobile }}{% endcapture %}

{% capture mobile_cols_class %}sm:grid-cols-{{ section.settings.columns_mobile }}{% endcapture %}

<div class="w-full" {{ section.shopify_attributes }}>
  <div
    class="container mx-auto px-4 py-8"
    style="padding-top: {{ section.settings.section_padding }}px; padding-bottom: {{ section.settings.section_padding }}px;"
  >
    <div
      class="grid {{ mobile_cols_class }} gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"
    >
      {% assign has_products = false %}
      {% for i in (1..8) %}
        {% assign product_key = 'product_' | append: i %}
        {% assign product = section.settings[product_key] %}

        {% if product != blank %}
          {% assign has_products = true %}
          <section class="bg-transparent">
            {% render 'product-card',
              product: product,
              show_compare_price: section.settings.show_compare_price,
              title_size: section.settings.product_title_size,
              title_color: section.settings.product_title_color,
              price_size: section.settings.price_size,
              price_color: section.settings.price_color,
              max_tags: 2
            %}
          </section>
        {% endif %}
      {% endfor %}

      {% unless has_products %}
        <div class="col-span-full text-center py-16 text-gray-600">Select up to 8 products to display in this grid</div>
      {% endunless %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Product grid",
  "settings": [
    {
      "type": "header",
      "content": "Products"
    },
    {
      "type": "product",
      "id": "product_1",
      "label": "Product 1"
    },
    {
      "type": "product",
      "id": "product_2",
      "label": "Product 2"
    },
    {
      "type": "product",
      "id": "product_3",
      "label": "Product 3"
    },
    {
      "type": "product",
      "id": "product_4",
      "label": "Product 4"
    },
    {
      "type": "product",
      "id": "product_5",
      "label": "Product 5"
    },
    {
      "type": "product",
      "id": "product_6",
      "label": "Product 6"
    },
    {
      "type": "product",
      "id": "product_7",
      "label": "Product 7"
    },
    {
      "type": "product",
      "id": "product_8",
      "label": "Product 8"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "header",
      "content": "Card style"
    },

    {
      "type": "checkbox",
      "id": "show_compare_price",
      "label": "Show compare at price",
      "default": true
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Background",
      "default": "#ffffff"
    },

    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "product_title_size",
      "label": "Product title size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "color",
      "id": "product_title_color",
      "label": "Product title color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "price_size",
      "label": "Price size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Price color",
      "default": "#000000"
    }
  ],
  "presets": [
    {
      "name": "Product grid"
    }
  ]
}
{% endschema %}

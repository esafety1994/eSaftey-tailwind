{% comment %} Collection listing with left filters and product grid on the right {% endcomment %}
<main class="container mx-auto px-4 py-8 max-w-7xl">
	<div class="grid grid-cols-1 md:grid-cols-12 gap-6">
		<!-- Filters column -->
		<aside class="hidden md:block md:col-span-3">
			<div class="sticky top-20">
				<h2 class="text-lg font-semibold mb-4">Filter</h2>

				{% if collection.all_tags.size > 0 %}
					<div class="mb-6">
						<h3 class="text-sm font-medium mb-2">Tags</h3>
						<ul class="space-y-2 text-sm">
							{% for tag in collection.all_tags %}
								<li>
									<a href="{{ collection.url }}?constraint={{ tag | url_encode }}" class="text-gray-700 hover:text-black">{{ tag }}</a>
								</li>
							{% endfor %}
						</ul>
					</div>
				{% endif %}

				<!-- Placeholder for additional filters (price, vendor) -->
				<div class="mb-6">
					<h3 class="text-sm font-medium mb-2">Sort</h3>
					<form method="get" action="">
						<select name="sort_by" class="w-full p-2 border rounded text-sm">
							<option value="manual">Featured</option>
							<option value="best-selling">Best selling</option>
							<option value="price-ascending">Price: low to high</option>
							<option value="price-descending">Price: high to low</option>
							<option value="created-descending">Newest</option>
						</select>
					</form>
				</div>
			</div>
		</aside>

		<!-- Products column -->
		<section class="md:col-span-9">
			<header class="mb-6">
				<h1 class="text-2xl font-semibold">{{ collection.title }}</h1>
				{% if collection.description != blank %}
					<div class="text-gray-600 mt-2 text-sm">{{ collection.description }}</div>
				{% endif %}
			</header>





			{% if collection.products_count > 0 %}
				{% paginate collection.products by 9 %}
				<div class="grid grid-cols-2 md:grid-cols-3 gap-6">
					{% for p in collection.products %}
						{% assign prod = p %}
						{% if p.handle and all_products[p.handle] %}
							{% assign prod = all_products[p.handle] %}
						{% endif %}
						<div class="w-full">
							{% render 'product-card', product: prod, max_tags:2 %}
						</div>
					{% endfor %}
				</div>
					{% render 'pagination', paginate: paginate, base_url: collection.url %}
				{% endpaginate %}
			{% else %}
				<div class="py-12 text-center text-gray-600">No products found in this collection.</div>
			{% endif %}
		</section>
	</div>
</main>


{% comment %}
  Product Price Snippet
  Displays product price with optional compare price and GST information
  Accepts:
  - product: {Object} Product (required)
  - show_compare_price: {Boolean} Show compare at price (optional, default: true)
  - price_size: {String} Price font size (optional, default: '14px')
  - price_color: {String} Price color (optional, default: '#000000')
{% endcomment %}
{% liquid
  assign show_compare_price = show_compare_price | default: true
  assign price_size = price_size | default: '20px'
  assign price_color = price_color | default: '#000000'
  assign show_ex_gst = show_ex_gst | default: false
  assign layout = layout | default: 'standard'
  assign gst_text_size = gst_text_size | default: 'text-sm'
  assign ex_price = product.selected_or_first_available_variant.price | divided_by: 1.1 | round
%}

{% case layout %}
  {% when 'card' %}
    <div class="flex flex-col gap-1 text-lg">
      <span class="font-semibold flex gap-x-4 flex-col">
        <span>
          <span>{{- product.selected_or_first_available_variant.price | money }}</span>
          
        </span>
        {% if product.compare_at_price > product.selected_or_first_available_variant.price and show_compare_price %}
          <span>
            <span class="text-grey-text line-through flex flex-wrap ml-0.5 justify-start items-center">
              {{ product.compare_at_price | money }}
            </span>
          </span>
        {% endif %}
      </span>
    </div>
  {% when 'sticky' %}
    <div class="text-left">
      <span class="font-semibold">
        <span>{{ product.selected_or_first_available_variant.price | money }}</span>

        {% if product.compare_at_price > product.selected_or_first_available_variant.price and show_compare_price %}
          <span>
            <span class="text-gray-500 line-through mr-2">
              {{ product.compare_at_price | money }}
            </span>
          </span>
        {% endif %}
      </span>
    </div>
  {% else %}
    <div class="flex flex-col gap-1 text-xl">
      <span class="font-semibold flex gap-x-4">
        <span>
          <span id="product-main-price">{{- product.selected_or_first_available_variant.price | money }}</span>
          <span class="ml-0.5 text-grey-text {{ gst_text_size }}">
            {% if product.tags contains 'gst-exempt' %}
              {{ 'general.taxes.exclude_tax_copy' | t }}
            {% else %}
              {{ 'general.taxes.include_tax_copy' | t }}
            {% endif %}
          </span>
        </span>
        {% if product.compare_at_price > product.selected_or_first_available_variant.price and show_compare_price %}
          <span>
            <span class="text-grey-text line-through flex flex-wrap ml-0.5 justify-start items-center">
              {{ product.compare_at_price | money }}
            </span>
          </span>
          <span class="text-green-700 flex items-center justify-center text-base">
            Save {{ product.compare_at_price | minus: product.selected_or_first_available_variant.price | money }}
          </span>
        {% endif %}
      </span>
      <span class="text-lg text-grey-text">{{ ex_price | money }} (ex. GST)</span>
    </div>
{% endcase %}

{% comment %}
  Simplified Product Card for Tailwind Theme
  Accepts:
  - product: {Object} Product (required)
  - show_vendor: {Boolean} Show product vendor (optional)
  - show_compare_price: {Boolean} Show compare at price (optional)
  - card_background: {String} Background color (optional)
  - card_border: {String} Border color (optional)
  - card_border_radius: {String} Border radius (optional)
  - card_padding: {String} Padding (optional)
  - title_size: {String} Title font size (optional)
  - title_color: {String} Title color (optional)
  - price_size: {String} Price font size (optional)
  - price_color: {String} Price color (optional)

  Uses separate snippets:
  - quick-view-btn.liquid for Quick View functionality
  - quick-add-btn.liquid for Quick Add functionality
  - product-price.liquid for Price display with GST information
  - product-tags.liquid for Filtered product tags with custom styling
{% endcomment %}

{% comment %}

    TO Dos:
    - ratings
    - stock level indicator
    - price formatting options

    {% endcomment %}
{% liquid
  assign show_vendor = show_vendor | default: false
  assign show_compare_price = show_compare_price | default: true
  assign card_background = card_background | default: '#ffffff'
  assign card_border = card_border | default: '#D6D4D4'
  assign card_border_radius = card_border_radius | default: '0'
  assign card_padding = card_padding | default: '15px'
  assign title_size = title_size | default: '18px'
  assign title_color = title_color | default: '#000000'
  assign price_size = price_size | default: '14px'
  assign price_color = price_color | default: '#000000'
  assign max_tags = max_tags | default :0
%}

<article
  class="flex flex-col overflow-hidden transition-transform transform p-3 h-full"
  style="background-color: {{ card_background }}; border: 1px solid {{ card_border }}; border-radius: {{ card_border_radius }}px;"
>
  <div class="relative overflow-hidden">
    
    <div href="{{ product.url }}" class="block relative w-full z-10 group" style="padding-bottom: 100%;">
        <!-- Hover Buttons Overlay -->
    <div class="absolute top-2 right-2 z-30 translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col gap-2">
      {% render 'quick-view-btn', product: product %}
    </div>
      {% if product.featured_image %}
        {% if product.images[1] %}
          <img
            src="{{ product.images[1] | image_url: width: 600 }}"
            alt="{{ product.images[1].alt | escape }}"
            class="absolute inset-0 w-full h-full object-cover transition-all duration-300 opacity-0 group-hover:!opacity-100 group-hover:scale-105 z-20"
            loading="lazy"
            width="600"
            height="600"
          >
        {% endif %}
        <img
          src="{{ product.featured_image | image_url: width: 600 }}"
          alt="{{ product.featured_image.alt | escape }}"
          class="absolute inset-0 w-full h-full object-cover transition-all duration-300{% if product.images[1] %} group-hover:opacity-0{% else %} group-hover:scale-105{% endif %}"
          loading="lazy"
          width="600"
          height="600"
        >
      {% else %}
        <div class="absolute inset-0 flex items-center justify-center bg-gray-100">
          {{ 'product-1' | placeholder_svg_tag }}
        </div>
      {% endif %}
    </div>
  </div>
  {% render 'product-tags', product: product, max_tags: max_tags %}
  <div class="flex flex-col gap-2 flex-grow" style="padding: {{ card_padding }}px;">
    <a
      href="{{ product.url }}"
      class="font-bold underline"
      style="font-size: {{ title_size }}; color: {{ title_color }}; font-weight: 500;"
    >
      {{ product.title }}
    </a>

    {% render 'product-price',
      product: product,
      show_compare_price: show_compare_price,
      price_size: price_size,
      price_color: price_color
    %}
  </div>
  <div class="flex justify-center my-2">        
        {% render 'quick-add-btn', product: product %}
    </div>
</article>

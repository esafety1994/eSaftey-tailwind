{% comment %}
  sticky-product-cart.liquid
  A compact sticky product cart that sits below the header on product pages.
  Shows product image, title, reviews, SKU, price, quantity and an Add to Cart button.
  This snippet expects `product` in scope when rendered.
{% endcomment %}

<div
  data-sticky-cart
  class="hidden md:block fixed left-0 right-0 z-50 transition-transform duration-200 sticky-cart"
  aria-hidden="false"
>
  <div class="bg-white">
    <div class="container m-auto p-3 grid lg:grid-cols-2 gap-4">
      <div class="items-start gap-2 hidden lg:flex">
        <div class="size-16">
          {% assign img = product.selected_or_first_available_variant.featured_image | default: product.images.first %}
          {% if img %}
            <img
              src="{{ img | image_url: '200x' }}"
              alt="{{ product.title }}"
              class="sticky-image w-full h-full object-cover"
              width="64"
              height="64"
            >
          {% else %}
            <div class="bg-gray-100 w-full h-full"></div>
          {% endif %}
        </div>
        <div class="flex items-center justify-between gap-4">
          <div class="truncate">
            <div class="text-sm font-semibold truncate">{{ product.title }}</div>
            {% render 'product-review', product: product %}
            <div class="text-xs text-gray-600 mt-1">
              SKU: <span class="sticky-sku">{{ product.selected_or_first_available_variant.sku }}</span>
              <input
                type="hidden"
                name="sticky-variant-id"
                value="{{ product.selected_or_first_available_variant.id }}"
              >
            </div>
          </div>
        </div>
      </div>

      <div class="flex justify-between items-center gap-4">
        <div class="text-right ml-4">
          <div class="text-lg font-semibold" id="sticky-price">
            {% render 'product-price',
              product: product,
              show_compare_price: false,
              price_size: '14px',
              req_from: 'sticky',
              show_ex_gst: true
            %}
          </div>
        </div>

        <div class="max-w-sm">
          {% render 'act-button', product: product %}
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{{ 'sticky-cart.js' | asset_url }}" defer></script>
<style>
  @media (max-width: 610px) {
    .sticky-cart .qty-selector {
      display: none;
    }
    .sticky-cart .primary-cart-button {
      padding: 10px;
      font-size: 14px;
    }
  }
</style>

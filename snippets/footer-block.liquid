{% comment %} Renders a single footer block. Expects `block` to be passed in. This snippet uses the existing accordion JS/CSS classes so the footer becomes collapsible on small screens. {% endcomment %}
{% if block %}
  <div class="footer-block">
    {% case block.type %}
      {% when 'menu' %}
        {% assign menu = linklists[block.settings.menu] %}
        {% if block.settings.title != blank %}
          {% assign heading = block.settings.title %}
        {% elsif menu %}
          {% assign heading = menu.title %}
        {% else %}
          {% assign heading = '' %}
        {% endif %}

        <!-- Mobile: accordion -->
        <div class="md:hidden">
          <accordion-tab class="accordion-wrapper">
            <div data-header class="flex justify-between items-center">
              <span class="text-base mb-4 text-primary">{{ heading }}</span>
              <div data-icon class="transition-transform duration-300 ease-in-out">
                {% render 'icon-svg-chevron-right', class: 'text-primary size-6' %}
              </div>
            </div>
            <div
              data-content
              class="accordion-content overflow-hidden transition-all duration-300 ease-in-out"
            >
              {% if menu and menu.links.size > 0 %}
                <ul class="space-y-2 text-sm pb-4">
                  {% for link in menu.links %}
                    <li class="footer-underline">
                      <a href="{{ link.url }}" class="text-white underline-animation">{{ link.title }}</a>
                    </li>
                  {% endfor %}
                </ul>
              {% else %}
                <div class="text-sm text-gray-500">No menu assigned.</div>
              {% endif %}
            </div>
          </accordion-tab>
        </div>

        <!-- Desktop: normal footer block -->
        <div class="hidden md:block">
          <h4 class="text-base mb-4 text-primary">{{ heading }}</h4>
          <div class="text-sm text-white">
            {% if menu and menu.links.size > 0 %}
              <ul class="space-y-2 text-sm">
                {% for link in menu.links %}
                  <li class="footer-underline">
                    <a href="{{ link.url }}" class="text-white underline-animation">{{ link.title }}</a>
                  </li>
                {% endfor %}
              </ul>
            {% else %}
              <div class="text-sm text-gray-500">No menu assigned.</div>
            {% endif %}
          </div>
        </div>

      {% when 'custom_text' %}
        <!-- Mobile: accordion -->
        <div class="md:hidden">
          <accordion-tab class="accordion-wrapper">
            <div data-header class="flex justify-between items-center">
              <span class="text-base mb-4 text-primary">{{ block.settings.title }}</span>
              <div data-icon class="transition-transform duration-300 ease-in-out">
                {% render 'icon-svg-chevron-right', class: 'text-primary size-6' %}
              </div>
            </div>
            <div
              data-content
              class="accordion-content overflow-hidden transition-all duration-300 ease-in-out"
            >
              {% if block.settings.image %}
                {% render 'responsive-image',
                  image: block.settings.image,
                  wrapper_class: 'w-full h-auto mb-4',
                  image_class: 'w-full h-full object-contain object-center'
                %}
              {% endif %}
              <div class="text-sm text-white pb-4">{{ block.settings.description }}</div>
            </div>
          </accordion-tab>
        </div>

        <!-- Desktop: normal footer block -->
        <div class="hidden md:block">
          <h4 class="text-base mb-4 text-primary">{{ block.settings.title }}</h4>
          {% if block.settings.image %}
            {% render 'responsive-image',
              image: block.settings.image,
              wrapper_class: 'w-full h-auto mb-4',
              image_class: 'w-full h-full object-contain object-center'
            %}
          {% endif %}
          <div class="text-sm text-white">{{ block.settings.description }}</div>
        </div>
      {% when 'footer-stay-in-touch' %}
        {% render 'footer-stay-in-touch', block: block %}
    {% endcase %}
  </div>
{% endif %}

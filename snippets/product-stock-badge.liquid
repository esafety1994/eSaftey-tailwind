{% comment %} Variant stock status pill â€” shows `variant.metafields.custom.stock_status` {% endcomment %}
<div id="product-stock-badge">
  {% assign _variant = variant %}
  {% if _variant == null and product %}
    {% assign _variant = product.selected_or_first_available_variant %}
  {% endif %}

  {% if _variant and _variant.metafields and _variant.metafields.custom and _variant.metafields.custom.stock_status %}
    {% assign status = _variant.metafields.custom.stock_status.value | default: _variant.metafields.custom.stock_status %}

    {% assign display_icon = '<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="size-6 text-green-700"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>' %}

    {% if status == 'Back Order' or status == 'Out of Stock' or status == 'Low Stock' %}
      {% assign display_icon = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="size-6 text-yellow-700">\n        <circle cx="12" cy="12" r="10"></circle><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path>\n      </svg>' %}
    {% endif %}

    <span class="flex py-1 text-sm gap-1 items-center ">
      {{ display_icon }}
      {{ status }}
    </span>
  {% else %}
    <span class="flex py-1 text-sm gap-1 items-center ">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="size-6 text-green-700"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
      In Stock
    </span>
  {% endif %}
</div>


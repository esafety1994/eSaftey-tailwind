{%- comment -%}
  Share buttons and robust previous/next navigation for article pages.
  Usage: {% render 'article-share-nav', article: article, blog: blog %}
{%- endcomment -%}

<div class="mt-6">
  <div class="flex items-center gap-3">
    <span class="text-sm font-medium">Share:</span>

    <a
      href="https://www.facebook.com/sharer.php?u={{ routes.root_url | append: article.url | url_encode }}"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Share on Facebook"
    >
      {% render 'icon-svg-facebook-solid', class: 'size-4' %}
    </a>
    <a
      href="https://pinterest.com/pin/create/button/?url={{ routes.root_url | append: article.url | url_encode }}{% if article.image %}&media={{ article.image | img_url: '720x' | url_encode }}{% endif %}&description={{ article.title | url_encode }}"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Share on Pinterest"
    >
      {% render 'icon-svg-pinterest', class: 'size-4' %}
    </a>
    <a
      href="https://twitter.com/intent/tweet?text={{ article.title | url_encode }}&url={{ routes.root_url | append: article.url | url_encode }}"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Share on Twitter"
    >
      {% render 'icon-svg-x', class: 'size-4' %}
    </a>
  </div>

  {%- comment -%} Determine previous and next articles reliably by iterating blog articles {%- endcomment -%}
  {%- assign previous_article = null -%}
  {%- assign next_article = null -%}
  {%- for a in blog.articles -%}
    {%- if a.id == article.id -%}
      {%- assign next_index = forloop.index -%}
      {%- if next_index < blog.articles.size -%}
        {%- assign next_article = blog.articles[next_index] -%}
      {%- endif -%}
      {%- break -%}
    {%- endif -%}
    {%- assign previous_article = a -%}
  {%- endfor -%}

  <div class="mt-5 flex items-center justify-between gap-4 border-t border-gray-200 pt-4">
    {% if previous_article %}
      <a href="{{ previous_article.url }}" class="md:pr-4 flex items-center gap-3 text-sm text-gray-700 hover:text-black">
        {% render 'icon-svg-arrow-left', class: 'size-6' %}
        <span class="flex flex-col items-start"><span>Previous</span> <span class="hidden md:block">{{ previous_article.title }}</span></span>
      </a>
    {% else %}
      <span></span>
    {% endif %}

    {% if next_article %}
      <a href="{{ next_article.url }}" class="md:border-l md:border-gray-200 md:pl-4 flex items-center gap-3 text-sm text-gray-700 hover:text-black ml-auto">
        <span class="flex flex-col items-end"><span>Next</span> <span class="hidden md:block text-right">{{ next_article.title }}</span></span>
        {% render 'icon-svg-arrow-right', class: 'size-6' %}
      </a>
    {% endif %}
  </div>
</div>

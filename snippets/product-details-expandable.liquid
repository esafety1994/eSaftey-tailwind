{% comment %}
  product-details-expandable.liquid
  Renders:
  - a "Show full description" row (with down arrow) below the short features list
  - a target section with tabs: "Description" and "Specifications"
  Usage: {% render 'product-details-expandable', product: product %}
  This snippet is markup-only and expects `assets/product-details.js` to provide
  smooth-scroll and tab behavior. Styling uses Tailwind utility classes.
{% endcomment %}

<div class="product-details-expandable mt-4 border border-gray-200 hidden md:block shopify-content-box ">
  <!-- Target section (initially hidden on small screens if desired) -->
  <div id="product-details-target" class="" tabindex="-1">
    <div class="tabs bg-gray-100">
      <nav class="flex p-4 gap-4" role="tablist" aria-label="Product information tabs">
        <button
          class="tab-btn py-3 px-4 text-sm font-medium border-b-2 border-transparent focus:outline-none text-primary bg-black cursor-pointer"
          data-tab="description"
          role="tab"
          aria-selected="true"
        >
          Product Description
        </button>
        {% if product.template_suffix == 'product-with-custom-field' %}
          <button
            class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer"
            data-tab="specs"
            role="tab"
            aria-selected="false"
          >
            Buyer's Guide
          </button>
        {% else %}
          <button
            class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer"
            data-tab="specs"
            role="tab"
            aria-selected="false"
          >
            Product Specifications
          </button>
        {% endif %}

        <button
          class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer"
          data-tab="data-sheets"
          role="tab"
          aria-selected="false"
        >
          Data Sheets
        </button>
        <button
          class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer"
          data-tab="faq"
          role="tab"
          aria-selected="false"
        >
          Frequently Asked Questions
        </button>
        <button
          class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer"
          data-tab="shipping"
          role="tab"
          aria-selected="false"
        >
          Shipping & Return
        </button>
      </nav>
    </div>

    <div class="tab-panels mt-4 px-4">
      <div class="tab-panel" data-panel="description">
        {% render 'product-tab-description', product: product %}
      </div>
      <div class="tab-panel hidden" data-panel="specs">
        {% if product.template_suffix == 'product-with-custom-field' %}
          <!-- DEBUG buyer_guide_content START -->
          {{ buyer_guide_content }}
          <!-- DEBUG buyer_guide_content END -->

          {% render 'product-tab-buyer-guide', product: product, buyer_guide_content: buyer_guide_content %}
        {% else %}
          {% render 'product-tab-specs', product: product %}
        {% endif %}
      </div>
      <div class="tab-panel hidden" data-panel="data-sheets">
        {% render 'product-tab-data-sheets', product: product %}
      </div>
      <div class="tab-panel hidden" data-panel="faq">{% render 'product-tab-faq', product: product %}</div>
      <div class="tab-panel hidden" data-panel="shipping">
        {% render 'product-tab-shipping', product: product, shipping_content: shipping_content %}
      </div>
    </div>
  </div>
</div>

{% render 'product-details-accordion',
  product: product,
  shipping_content: shipping_content,
  buyer_guide_content: buyer_guide_content
%}

<style>
  .tab-panel p{ margin:10px 0;}
  .tab-panel ul {
    padding-left: 25px;
    list-style-type: disc;
  }
  .tab-panel ul li {
    margin:10px 0;
  }
</style>

{% comment %}
product-details-expandable.liquid
Renders:
- a "Show full description" row (with down arrow) below the short features list
- a target section with tabs: "Description" and "Specifications"
Usage: {% render 'product-details-expandable', product: product %}
This snippet is markup-only and expects `assets/product-details.js` to provide
smooth-scroll and tab behavior. Styling uses Tailwind utility classes.
{% endcomment %}

<div class="product-details-expandable mt-4 border border-gray-200"> 

  <!-- Target section (initially hidden on small screens if desired) -->
  <div id="product-details-target" class="" tabindex="-1">
    <div class="tabs bg-gray-100">
        <nav class="flex p-4 gap-4 flex-wrap" role="tablist" aria-label="Product information tabs">
          <button class="tab-btn py-3 px-4 text-sm font-medium border-b-2 border-transparent focus:outline-none text-primary bg-black cursor-pointer" data-tab="description" role="tab" aria-selected="true">Description</button>
          <button class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer" data-tab="specs" role="tab" aria-selected="false">Specifications</button>
          <button class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer" data-tab="data-sheets" role="tab" aria-selected="false">Data Sheets</button>
          <button class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer" data-tab="faq" role="tab" aria-selected="false">Frequently Asked Questions</button>
          <button class="tab-btn py-3 px-4 text-sm font-medium text-gray-700 bg-white border border-gray-200 focus:outline-none hover:text-black cursor-pointer" data-tab="shipping" role="tab" aria-selected="false">Shipping & Return</button>
        </nav>
    </div>

    <div class="tab-panels mt-4 px-4">
      <div class="tab-panel" data-panel="description">
        <div class="prose max-w-none">
            <div class="desc-preview relative overflow-hidden  [&>p]:my-4" style="max-height: 360px;">
              {{ product.description }}
              <div class="fade absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-white to-transparent pointer-events-none"></div>
            </div>
            <div class="mt-2 flex justify-center my-4">
              <button type="button" class="desc-toggle btn outline-button border-gray-400 !normal-case" aria-expanded="false">Read more</button>
            </div>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="specs">
        {% comment %} Try to render a specs table if product.metafields.specs exists; otherwise show a placeholder. {% endcomment %}
        {% if product.metafields and product.metafields.custom and product.metafields.custom.specifications %}
          {{ product.metafields.custom.specifications | raw }}
        {% else %}
          <div class="text-sm text-gray-600">No specifications available.</div>
        {% endif %}
      </div>
      <div class="tab-panel hidden" data-panel="data-sheets">
        <div class="text-sm text-gray-600">Data Sheets will be available here.</div>
      </div>

      <div class="tab-panel hidden" data-panel="faq">
        <div class="text-sm text-gray-600">Frequently Asked Questions will be listed here.</div>
      </div>

      <div class="tab-panel hidden" data-panel="shipping">
        <div class="text-sm text-gray-600">Shipping & Return information will be provided here.</div>
      </div>
    </div>
  </div>
</div>

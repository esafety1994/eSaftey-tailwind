class VariantPicker extends HTMLElement{constructor(){super()}get sectionId(){return this.dataset.sectionId}connectedCallback(){this.variantSelector=this.querySelectorAll('input[type="radio"], select'),this.handleChange=this.onVariantChange.bind(this),this.variantSelector.forEach(e=>{e.addEventListener("change",this.handleChange)}),this.querySelectorAll('input[type="radio"]').forEach(e=>{e.addEventListener("change",function(){updateActiveOptionStyles()})});try{updateSelectedOptionNames(this)}catch(e){}this.variantSelector.forEach(e=>{e.addEventListener("change",()=>{try{updateSelectedOptionNames(this)}catch(e){}})})}disconnectedCallback(){this.variantSelector.forEach(e=>{e.removeEventListener("change",this.handleChange)})}onVariantChange(e){const t=e.currentTarget;try{document.dispatchEvent(new CustomEvent("product:variant:changing",{detail:{variantId:t.value}}))}catch(e){}const n=`${window.location.pathname}?variant=${t.value}&section_id=${this.sectionId}`,c=document.querySelector(".product-container");if(c&&(c.classList.add("is-loading"),!c.querySelector(".product-loading-overlay"))){const e=document.createElement("div");e.className="product-loading-overlay",e.innerHTML='<div class="spinner"></div>',c.appendChild(e)}fetch(n).then(e=>e.text()).then(e=>{const t=document.createElement("div");t.innerHTML=e;const o=t.querySelector(".product-container");try{const e=t.querySelector("#product-glide"),n=document.getElementById("product-glide");if(e&&n){var r=e.getAttribute("data-start-index");null!==r&&n.setAttribute("data-start-index",r),n.innerHTML=e.innerHTML;var a=t.querySelector("#product-thumbs"),i=document.getElementById("product-thumbs");a&&i&&(i.innerHTML=a.innerHTML);try{document.dispatchEvent(new CustomEvent("product:content:replaced",{detail:{root:n}}))}catch(e){}}const c=t.querySelector("#product-price"),o=document.getElementById("product-price");c&&o&&(o.innerHTML=c.innerHTML);const d=t.querySelector("#product-sku"),s=document.getElementById("product-sku");d&&s&&(s.innerHTML=d.innerHTML);const u=t.querySelector("#product-stock-badge"),l=document.getElementById("product-stock-badge");u&&l&&(l.innerHTML=u.innerHTML);const p=t.querySelector("#product-backorder-text"),m=document.getElementById("product-backorder-text");p&&m&&(m.innerHTML=p.innerHTML);const h=t.querySelector("#product-act-button"),v=document.getElementById("product-act-button");h&&v&&(v.innerHTML=h.innerHTML);const y=t.querySelector("[data-sticky-cart]"),S=document.querySelector("[data-sticky-cart]");y&&S&&(S.innerHTML=y.innerHTML);const g=t.querySelector('form input[name="id"]'),L=document.querySelector('form input[name="id"]');g&&L&&(L.value=g.value)}catch(e){console.warn("VariantPicker: selective update failed",e)}try{document.dispatchEvent(new CustomEvent("product:content:replaced",{detail:{root:o||c}}))}catch(e){}setTimeout(function(){if(c){c.classList.remove("is-loading");const e=c.querySelector(".product-loading-overlay");e&&e.parentNode.removeChild(e)}},120);const d=new URL(n,window.location.origin);d.searchParams.delete("section_id"),window.history.pushState({},"",d.toString())}).catch(e=>{if(console.error("Error fetching variant data:",e),c){c.classList.remove("is-loading");const e=c.querySelector(".product-loading-overlay");e&&e.parentNode.removeChild(e)}}),console.log("Selected Variant ID:",n)}}function updateActiveOptionStyles(){try{document.querySelectorAll('.product-container input[type="radio"]').forEach(function(e){var t=document.querySelector('label[for="'+e.id+'"]');t&&(e.checked?(t.classList.add("swatch-active"),t.classList.add("scale-110"),t.classList.add("shadow-lg")):(t.classList.remove("swatch-active"),t.classList.remove("scale-110"),t.classList.remove("shadow-lg")))})}catch(e){}}function updateSelectedOptionNames(e){const t=e||document;try{t.querySelectorAll(".variant-picker__option").forEach(function(e){const t=e.querySelector("legend"),n=e.querySelector(".variant-selected-name");if(!n||!t)return;const c=(t.textContent||"").trim().toLowerCase();if(-1===c.indexOf("size")&&-1===c.indexOf("colour")&&-1===c.indexOf("color"))return void(n.textContent="");const o=e.querySelector("select");if(o){const e=o.options[o.selectedIndex];return void(n.textContent=e?e.text.trim():"")}const r=e.querySelector('input[type="radio"]');if(!r)return void(n.textContent="");const a=r.getAttribute("name"),i=e.querySelector('input[name="'+a+'"]:checked')||document.querySelector('input[name="'+a+'"]:checked');if(i){const e=document.querySelector('label[for="'+i.id+'"]');n.textContent=e?e.textContent.trim():i.value||""}else n.textContent=""})}catch(e){}}customElements.define("variant-picker",VariantPicker),document.addEventListener("DOMContentLoaded",updateActiveOptionStyles),document.addEventListener("product:content:replaced",updateActiveOptionStyles),document.addEventListener("DOMContentLoaded",function(){updateSelectedOptionNames(document)}),document.addEventListener("product:content:replaced",function(){updateSelectedOptionNames(document)});
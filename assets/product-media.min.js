document.addEventListener("DOMContentLoaded",function(){let e=null,t=null;const n=document.querySelector("[data-esProductGlideCount]");n&&parseInt(n.getAttribute("data-esProductGlideCount"),10);function d(e){if(!t)return;const n=document.querySelectorAll("#esProductThumbs > .glide__track .glide__slide").length;let d;try{d=t&&t.settings&&t.settings.perView?Math.floor(t.settings.perView):void 0}catch(e){d=void 0}if(d||(d=window.innerWidth>=1200?5:window.innerWidth>=1024||window.innerWidth>=767?4:(window.innerWidth,3)),d=Math.max(1,Math.min(d,n||d)),n<=d){try{t.go("=0")}catch(e){}try{const e=document.querySelector("#esProductThumbs .glide__slides");e&&(e.style.transition="none",e.style.transform="translate3d(0px, 0px, 0px)",setTimeout(()=>{e.style.transition=""},40))}catch(e){}}else{const i=Math.max(0,n-d),o=e-(d-1),c=Math.max(0,Math.min(o,i));try{("number"==typeof t.index?t.index:null)!==c&&t.go("="+c)}catch(e){try{t.go("="+c)}catch(e){}}}var i;i=e,document.querySelectorAll("#esProductThumbs .glide__slide").forEach((e,t)=>e.classList.toggle("thumb-active",t===i))}function i(){!function(){try{e&&"function"==typeof e.destroy&&e.destroy()}catch(e){}try{t&&"function"==typeof t.destroy&&t.destroy()}catch(e){}e=null,t=null}();const n=document.getElementById("esProductGlide"),i=document.getElementById("esProductThumbs"),o=parseInt(n&&n.dataset.startIndex||i&&i.dataset.startIndex||0,10)||0;if(e=new Glide("#esProductGlide",{type:"slider",startAt:o,perView:1,keyboard:!1}),i){const e=document.querySelectorAll("#esProductThumbs > .glide__track .glide__slide").length;let n;n=window.innerWidth>=1200?5:window.innerWidth>=1024||window.innerWidth>=767?4:(window.innerWidth,3),n=Math.max(1,Math.min(n,e||1)),t=new Glide("#esProductThumbs",{type:"slider",startAt:o,perView:n,gap:8,bound:!0,keyboard:!1,breakpoints:{1200:{perView:5},1024:{perView:4},767:{perView:4},510:{perView:3}}})}e.on("run.after",()=>{d(e.index)}),t&&t.on("mount.after",()=>{d(e.index)}),t&&t.mount(),e.mount();try{const t=document.getElementById("esProductGlide");t&&t.querySelectorAll(".slide-zoom-btn").forEach(function(t){t.addEventListener("click",function(t){var n=t.currentTarget.closest(".glide__slide"),d=Array.from(document.querySelectorAll("#esProductGlide .glide__slide")),i=n?d.indexOf(n):e.index||0,o=document.getElementById("product-lightbox"),c=document.getElementById("product-lightbox-glide");if(o&&c)if(o.classList.remove("hidden"),o.classList.add("flex"),c._glideInstance)try{c._glideInstance.go("="+i)}catch(t){}else try{c._glideInstance=new Glide("#product-lightbox-glide",{type:"carousel",perView:1,gap:16,startAt:i,keyboard:!1}).mount(),c._glideInstance.on("run.after",function(){try{e.go("="+c._glideInstance.index)}catch(e){}})}catch(t){console.warn("product-media: lightbox glide mount failed",t)}})})}catch(e){}}document.addEventListener("click",function(t){const n=t.target.closest&&t.target.closest("#esProductThumbs .thumb-btn");if(n){const i=Array.from(document.querySelectorAll("#esProductThumbs .glide__slide")),o=n.closest(".glide__slide"),c=i.indexOf(o);c>=0&&e.go("="+c);try{setTimeout(function(){d(c)},40)}catch(t){}}}),i(),document.addEventListener("product:content:replaced",function(e){setTimeout(function(){i()},20)});var o=document.getElementById("product-lightbox-close"),c=document.getElementById("product-lightbox"),r=document.getElementById("product-lightbox-glide");o&&c&&o.addEventListener("click",function(){c.classList.add("hidden"),c.classList.remove("flex");try{r&&r._glideInstance&&(r._glideInstance.destroy(),r._glideInstance=null)}catch(e){}}),c&&c.addEventListener("click",function(e){if(e.target===c){c.classList.add("hidden"),c.classList.remove("flex");try{r&&r._glideInstance&&(r._glideInstance.destroy(),r._glideInstance=null)}catch(e){}}})});
!function(){function e(){var e=document.querySelector("#product-glide"),t=document.querySelector("#product-thumbs");if(e){var n=parseInt(e.getAttribute("data-start-index"))||0;if(e._glideInstance){try{e._glideInstance.destroy()}catch(e){}e._glideInstance=null}if(t&&t._glideInstance){try{t._glideInstance.destroy()}catch(e){}t._glideInstance=null}if(window.Glide)r();else{var i="https://cdn.jsdelivr.net/npm/@glidejs/glide";if(document.querySelector('script[src="'+i+'"]')){var c=setInterval(function(){window.Glide&&(clearInterval(c),r())},100);setTimeout(function(){clearInterval(c)},5e3)}else{var d=document.createElement("script");d.src=i,d.onload=r,d.onerror=function(){console.warn("product-media: failed to load Glide")},document.head.appendChild(d)}}}function r(){try{var i=new Glide("#product-glide",{type:"carousel",perView:1,gap:16,startAt:n}).mount();if(e._glideInstance=i,t){var c=Math.min(5,t.querySelectorAll(".glide__slides > li").length||5),d=new Glide("#product-thumbs",{type:"slider",perView:c,gap:8}).mount();function r(e){t.querySelectorAll(".glide__slides > li").forEach(function(t,n){n===e?t.classList.add("thumb-active"):t.classList.remove("thumb-active")})}t._glideInstance=d,t.querySelectorAll(".thumb-btn").forEach(function(e){e.addEventListener("click",function(t){var n=parseInt(e.getAttribute("data-thumb-index"))||0;try{i.go("="+n)}catch(e){}})}),r(n||0),d.on("run.after",function(){try{i.go("="+d.index),r(d.index)}catch(e){}}),i.on("run.after",function(){try{var e=i.index,n=t.querySelectorAll(".glide__slides > li").length||0,l="number"==typeof d.index?d.index:0,o=c||1,a=l+o-1;if(e<l)d.go("="+e);else if(e>a){var s=Math.min(Math.max(e-o+1,0),Math.max(n-o,0));d.go("="+s)}r(e)}catch(e){}})}e.querySelectorAll(".glide__slide img").forEach(function(e){e.style.cursor="zoom-in",e.addEventListener("click",function(){var t=document.getElementById("product-lightbox"),n=document.getElementById("product-lightbox-img");t&&n&&(n.src=e.src,t.classList.remove("hidden"),t.classList.add("flex"))})}),document.querySelectorAll(".product-gallery-arrow").forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("data-glide-dir");if(n)try{n.indexOf("="),i.go(n)}catch(e){}})});var l=document.getElementById("product-lightbox-close"),o=document.getElementById("product-lightbox");l&&o&&l.addEventListener("click",function(){o.classList.add("hidden"),o.classList.remove("flex")}),o&&o.addEventListener("click",function(e){e.target===o&&(o.classList.add("hidden"),o.classList.remove("flex"))})}catch(a){console.error("product-media: Glide init failed",a)}}}document.addEventListener("DOMContentLoaded",e),document.addEventListener("product:content:replaced",e)}();
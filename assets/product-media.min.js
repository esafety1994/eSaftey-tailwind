document.addEventListener("DOMContentLoaded",function(){let e=null,t=null;const n=document.querySelector("[data-esProductGlideCount]");n&&parseInt(n.getAttribute("data-esProductGlideCount"),10);function i(e){if(!t)return;const n=document.querySelectorAll("#esProductThumbs > .glide__track .glide__slide").length;let i;try{i=t&&t.settings&&t.settings.perView?Math.floor(t.settings.perView):void 0}catch(e){i=void 0}if(i||(i=window.innerWidth>=1200?5:window.innerWidth>=1024||window.innerWidth>=767?4:(window.innerWidth,3)),i=Math.max(1,Math.min(i,n||i)),n<=i){try{t.go("=0")}catch(e){}try{const e=document.querySelector("#esProductThumbs .glide__slides");e&&(e.style.transition="none",e.style.transform="translate3d(0px, 0px, 0px)",setTimeout(()=>{e.style.transition=""},40))}catch(e){}}else{const d=Math.max(0,n-i),o=e-(i-1),c=Math.max(0,Math.min(o,d));try{("number"==typeof t.index?t.index:null)!==c&&t.go("="+c)}catch(e){try{t.go("="+c)}catch(e){}}}var d;d=e,document.querySelectorAll("#esProductThumbs .glide__slide").forEach((e,t)=>e.classList.toggle("thumb-active",t===d))}function d(){!function(){try{e&&"function"==typeof e.destroy&&e.destroy()}catch(e){}try{t&&"function"==typeof t.destroy&&t.destroy()}catch(e){}e=null,t=null}();const n=document.getElementById("esProductGlide"),d=document.getElementById("esProductThumbs"),o=parseInt(n&&n.dataset.startIndex||d&&d.dataset.startIndex||0,10)||0;if(e=new Glide("#esProductGlide",{type:"slider",startAt:o,perView:1,keyboard:!1}),d){const e=document.querySelectorAll("#esProductThumbs > .glide__track .glide__slide").length;let n;n=window.innerWidth>=1200?5:window.innerWidth>=1024||window.innerWidth>=767?4:(window.innerWidth,3),n=Math.max(1,Math.min(n,e||1)),t=new Glide("#esProductThumbs",{type:"slider",startAt:o,perView:n,gap:8,bound:!0,keyboard:!1,breakpoints:{1200:{perView:5},1024:{perView:4},767:{perView:4},510:{perView:3}}})}e.on("run.after",()=>{i(e.index)}),t&&t.on("mount.after",()=>{i(e.index)}),t&&t.mount(),e.mount();try{const t=document.getElementById("esProductGlide");if(t){const n=function(t){var n=Array.from(document.querySelectorAll("#esProductGlide .glide__slide")),i=t?n.indexOf(t):e.index||0,d=document.getElementById("product-lightbox"),o=document.getElementById("product-lightbox-glide");if(d&&o)if(d.classList.remove("hidden"),d.classList.add("flex"),o._glideInstance)try{o._glideInstance.go("="+i)}catch(e){}else try{o._glideInstance=new Glide("#product-lightbox-glide",{type:"carousel",perView:1,gap:16,startAt:i,keyboard:!1}).mount(),o._glideInstance.on("run.after",function(){try{e.go("="+o._glideInstance.index)}catch(e){}})}catch(e){console.warn("product-media: lightbox glide mount failed",e)}};t.querySelectorAll(".slide-zoom-btn").forEach(function(e){e.addEventListener("click",function(e){var t=e.currentTarget.closest(".glide__slide");n(t)})}),t.addEventListener("click",function(e){try{var i=e.target;if(!i)return;if(i.closest&&i.closest(".slide-zoom-btn"))return;var d=i.closest?i.closest(".glide__slide"):null;if(!d)return;if(d.closest&&d.closest("#esProductThumbs"))return;if(!(i.closest?i.closest("img"):null))return;if(i.closest&&i.closest("a"))return;if(!t.contains(d))return;n(d)}catch(e){}})}}catch(e){}}document.addEventListener("click",function(t){const n=t.target.closest&&t.target.closest("#esProductThumbs .thumb-btn");if(n){const d=Array.from(document.querySelectorAll("#esProductThumbs .glide__slide")),o=n.closest(".glide__slide"),c=d.indexOf(o);c>=0&&e.go("="+c);try{setTimeout(function(){i(c)},40)}catch(t){}}}),d(),document.addEventListener("product:content:replaced",function(e){setTimeout(function(){d()},20)});var o=document.getElementById("product-lightbox-close"),c=document.getElementById("product-lightbox"),r=document.getElementById("product-lightbox-glide");o&&c&&o.addEventListener("click",function(){c.classList.add("hidden"),c.classList.remove("flex");try{r&&r._glideInstance&&(r._glideInstance.destroy(),r._glideInstance=null)}catch(e){}}),c&&c.addEventListener("click",function(e){if(e.target===c){c.classList.add("hidden"),c.classList.remove("flex");try{r&&r._glideInstance&&(r._glideInstance.destroy(),r._glideInstance=null)}catch(e){}}})});